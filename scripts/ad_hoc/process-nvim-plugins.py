import json


p = "/home/isaac/repos/notes/json-notes/nvim-plugins.json"
p2 = "/home/isaac/repos/notes/json-notes/nvim-pluginsTEST.json"
TAGS = set([
    "agriculture",
    "annotation",
    "ansiColor",
    "benchmarking",
    "bibliography",
    "clock",
    "clojure",
    "comment",
    "connectivity",
    "correctThinking",
    "cracking",
    "crystal",
    "curriculum",
    "dataGeneration",
    "diagram",
    "documentary",
    "dotfileManager",
    "fallacy",
    "family",
    "fsharp",
    "gemini",
    "grammar",
    "grpc",
    "hierarchical",
    "ironNvim",
    "languageSimilarity",
    "performance",
    "polymathy",
    "proofsBook",
    "stackoverflow",
    "svg",
    "symbolicComputing",
    "table",
    "trace",
    "zellij",
    "matrixDecomposition",
    "treesitter",
    "tripPlanner",
    "git",
    "sponsorship",
    "nsm",
    "attention",
    "transformer",
    "resourceList",
    "biology",
    "sex",
    "top",
    "asciiArt",
    "dataFormat",
    "evolution",
    "shinto",
    "lazyman",
    "clustering",
    "comedy",
    "humor",
    "keyboard",
    "app",
    "jordanNormalForm",
    "juventas",
    "terminal",
    "android",
    "latent",
    "llvm",
    "proof",
    "translation",
    "rlang",
    "history",
    "boot",
    "car",
    "corpus",
    "dashboard",
    "huggingface",
    "screenshot",
    "template",
    "paremiology",
    "speechSynthesis",
    "assembler",
    "gan",
    "podcast",
    "compilation",
    "mathExpressionParsing",
    "mentalHealth",
    "parenting",
    "privacy",
    "raku",
    "relationship",
    "rosettaRegex",
    "sequence",
    "templating",
    "wasm",
    "science",
    "freeCodeCamp",
    "dots",
    "music",
    "architecture",
    "async",
    "bookNotes",
    "commandLine",
    "fuzzyFinder",
    "jira",
    "kmonad",
    "lsp",
    "rust",
    "search",
    "creativity",
    "diff",
    "differentiation",
    "landscapeClient",
    "logic",
    "notification",
    "paradigm",
    "videoEditor",
    "neuralNetwork",
    "economics",
    "nix",
    "docker",
    "gtk",
    "motivation",
    "nbcat",
    "server",
    "editingEnhancement",
    "pedagogy",
    "notebook",
    "exercism",
    "finance",
    "graphics",
    "database",
    "nlp",
    "cinema",
    "rl",
    "machineEmulators",
    "operatingSystem",
    "php",
    "python",
    "llm",
    "proglangTable",
    "ast",
    "complex",
    "fairness",
    "introspection",
    "kde",
    "medicine",
    "meditation",
    "mentalFortitude",
    "ocaml",
    "qt",
    "sorting",
    "websocket",
    "cloud",
    "cloudResource",
    "hybridModifier",
    "packaging",
    "stata",
    "editor",
    "jupyter",
    "sociology",
    "rlcard",
    "solver",
    "sport",
    "nvim",
    "lifeHack",
    "ide",
    "pytorch",
    "security",
    "teams",
    "topology",
    "decisionTheory",
    "distribution",
    "encoding",
    "gardening",
    "sexuality",
    "stackexchange",
    "software",
    "tex",
    "acoustics",
    "cryptography",
    "mlops",
    "scala",
    "learnopencv",
    "media",
    "chatgpt",
    "algorithm",
    "ethics",
    "foss",
    "logging",
    "markdown",
    "moments",
    "taskRunner",
    "icon",
    "interlinear",
    "perl",
    "tf",
    "knutils",
    "regression",
    "userscript",
    "wordEmbedding",
    "zoroastrian",
    "java",
    "food",
    "haskell",
    "ifThen",
    "tmux",
    "linearAlgebra",
    "aphorism",
    "astronomy",
    "configSwitching",
    "cowsay",
    "dotnet",
    "fileMonitor",
    "githoarder",
    "graph",
    "henryhiggins",
    "hex",
    "interlineator",
    "neuralNetworks",
    "publicSpeaking",
    "spotify",
    "typing",
    "typst",
    "weather",
    "indentation",
    "monitoring",
    "c",
    "geometry",
    "dataset",
    "design",
    "discrete",
    "bookToLiveBy",
    "gui",
    "keyboardTrainer",
    "styleTransfer",
    "writing",
    "nvimPlugin",
    "cuda",
    "factorAnalysis",
    "gameTheory",
    "hwOrExam",
    "opengl",
    "interview",
    "phone",
    "SORT",
    "politics",
    "africa",
    "earley",
    "fileBrowser",
    "keybind",
    "productivity",
    "project",
    "econometrics",
    "network",
    "oldvim",
    "testing",
    "lowlevel",
    "fitness",
    "decisionTree",
    "hank",
    "quantum",
    "randomForest",
    "thinkTank",
    "mobile",
    "grecromancer",
    "ireland",
    "poetry",
    "xgboost",
    "philosophy",
    "adversarial",
    "autodiff",
    "calendar",
    "chemistry",
    "codeAnalysis",
    "colorInterpolation",
    "colorSpaceMapping",
    "date",
    "discord",
    "hindu",
    "joke",
    "json",
    "keyboardLayout",
    "license",
    "nim",
    "noteToSelf",
    "sheetMusic",
    "widget",
    "zig",
    "personalWebsite",
    "gnome",
    "yankPaste",
    "anatomy",
    "documentation",
    "feminism",
    "reddit",
    "work",
    "communication",
    "nlq",
    "snippet",
    "transcription",
    "ipa",
    "linguistics",
    "linux",
    "anki",
    "consciousness",
    "devenv",
    "travel",
    "general",
    "image",
    "parsing",
    "math",
    "config",
    "gaming",
    "humanities",
    "colorTheme",
    "rosettaProjects",
    "cs",
    "calculator",
    "coreutils",
    "dualMonitor",
    "habit",
    "html",
    "identity",
    "jvm",
    "naiveBayes",
    "nand2tetris",
    "paperReading",
    "picker",
    "presentation",
    "theano",
    "visualization",
    "appDevelopment",
    "arxiv",
    "cpp",
    "flake",
    "reading",
    "proglang",
    "youtube",
    "css",
    "malina",
    "viterbi",
    "go",
    "font",
    "jewish",
    "multiplexer",
    "hardware",
    "cheatsheet",
    "forum",
    "quote",
    "literature",
    "wisdom",
    "aesthetics",
    "alpine",
    "browser",
    "changeDirectory",
    "codeImage",
    "community",
    "curiosity",
    "email",
    "emoji",
    "fortran",
    "interaction",
    "kotlin",
    "make",
    "pandoc",
    "relativity",
    "scienceFiction",
    "scraping",
    "screenRecorder",
    "build",
    "guix",
    "rag",
    "ralm",
    "voiceConversion",
    "bash",
    "buddhist",
    "distro",
    "book",
    "editingExtensions",
    "wallpaper",
    "veryShortIntroduction",
    "speechProcessing",
    "backend",
    "bugTracker",
    "commit",
    "conference",
    "disassembly",
    "display",
    "eigen",
    "emulation",
    "geography",
    "gitlab",
    "imageEditor",
    "keras",
    "node",
    "orgmode",
    "streaming",
    "typistry",
    "kanata",
    "nebokrai",
    "idea",
    "signalProcessing",
    "julia",
    "documentation",
    "neuro",
    "psychology",
    "news",
    "debug",
    "deepLearning",
    "languageLearning",
    "statistics",
    "socialScience",
    "determinant",
    "emulator",
    "fennel",
    "launcher",
    "matrix",
    "movie",
    "npm",
    "obsidian",
    "octave",
    "philanthropy",
    "refactoring",
    "ruby",
    "setTheory",
    "termulator",
    "windows",
    "zettelkasten",
    "emacs",
    "i3",
    "tts",
    "vscode",
    "song",
    "wiktionary",
    "homeManager",
    "model",
    "person",
    "bitextAlignment",
    "gtd",
    "wikipedia",
    "ricing",
    "chatbot",
    "regex",
    "garbageCollection",
    "inequality",
    "initSystem",
    "kubernetes",
    "nativeAmerican",
    "novelWriting",
    "pictrix",
    "pipeline",
    "rootDetector",
    "routewindow",
    "running",
    "sops",
    "challenge",
    "lisp",
    "engineering",
    "lua",
    "functional",
    "ml",
    "fun",
    "hyprland",
    "neorg",
    "shell",
    "semantics",
    "practicalLiving",
    "zen"
])
with open(p) as f:
    notes = json.load(f)

tags = set()
for note in notes:
    tags = tags.union(note["tags"])

for note in notes:
    oldtags = [t for t in note["tags"]]
    note["tags"] = [t for t in oldtags if t in TAGS]
    note["subtags"].extend([t for t in oldtags if t not in TAGS])

print(tags.intersection(TAGS))

with open(p2, "w") as f:
    json.dump(notes, f, ensure_ascii=False, indent=4)